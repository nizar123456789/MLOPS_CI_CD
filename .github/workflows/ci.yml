name: Continous Integration 

on:
    push:
        branches:["main"]
    pull_request :
        branches["main"]
    workflow_dispatch:
permissions:write-all
jobs:
    build:
        runs-on:ubuntu-latest
        steps:
            - uses:actions/checkout@v3
            - uses:actions/setup-cml@v2
            - name : install Packages
                run: make install
            - name: Format
                run : make format
            - name : Train
                run: make train
            - name : Evaluation
                env:
                    GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}
                run: make evaluate
    
